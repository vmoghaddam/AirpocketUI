<style>
    .dx-treelist .dx-row > td {
        padding: 12px 3px 12px 3px !important
    }

    .lib-folder {
        border: 1px solid #ccc;
        margin: 4px 6px 0 6px;
        /*padding:20px !important;*/
        display: block;
        background-color: cornsilk;
    }

    .folder-notvisited {
        font-weight: bold;
        font-size: 14px !important;
    }

    .folder-notvisited-hint {
        color: red;
    }

    .file-visited {
        color: #00ff99 !important;
    }

    .file-visited-title {
        font-weight: bold;
    }

    .lib-book {
        border: 1px solid #ccc;
        margin: 4px 6px 0 6px;
        /*padding:20px !important;*/
        display: block;
        background-color: white;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f0f0f0;
        padding: 20px;
    }

    .section {
        margin-bottom: 20px;
        margin-top: 10px;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        border: 1px solid lightgray;
    }

    h2 {
        color: black;
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 20px;
    }

    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: space-between;
    }

    .trn_card h3 {
        margin-bottom: 10px;
        color: black;
        font-size: 18px;
        border: none !important
    }

    .attendance-section {
        margin-bottom: 20px;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        border: 1px solid lightgray;
    }

    /* trn_card layout for mobile devices */
    .attendance-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .attendance_trn_card {
        background: linear-gradient(135deg, #f6f9fc, #fff);
        border-radius: 12px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
    }

        .attendance_trn_card h3 {
            font-size: 20px;
            color: #333;
            margin: 0;
            padding: 15px;
            background-color: #FF5722;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

            .attendance_trn_card h3:hover {
                background-color: #E64A19;
            }

        .attendance_trn_card .trn_card-details {
            /*display: none;*/
            padding: 20px;
            background-color: #fff;
        }

        .attendance_trn_card.active .trn_card-details {
            display: block;
        }

    .remark-input, .score-input {
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border-radius: 12px;
        border: 1px solid #ddd;
        background-color: #f0f0f0;
        font-size: 15px;
        transition: all 0.3s ease;
    }

        .remark-input:focus, .score-input:focus {
            background-color: #fff;
            border-color: #007bff;
            outline: none;
        }

    /* Final result buttons */
    .final-result-buttons {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }

    .final-result-button {
        padding: 10px 20px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        color: white;
        background-color: lightgray;
        width: 100px;
        transition: background-color 0.3s ease;
    }

        /* Default button styles */
        .final-result-button.pass,
        .final-result-button.failed,
        .final-result-button.reexam {
            background-color: lightgray;
        }

        /* Active button styles */
        .final-result-button.active {
            background-color: #28a745;
            transform: scale(1.05);
        }

    .attend_section {
        margin-bottom: 20px;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    h2 {
        color: #007bff;
        font-size: 24px;
        margin-bottom: 20px;
    }

    /* Table Styling */
    .attend_attendance_table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

        .attend_attendance_table th, .attend_attendance_table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        .attend_attendance_table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }



    /* Table layout for larger screens */
    @media (min-width: 768px) {
        .attendance-container {
            display: none;
        }

        .attendance-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

            .attendance-table th, .attendance-table td {
                border: 1px solid #ddd;
                padding: 12px;
                text-align: center;
            }

            .attendance-table th {
                background-color: #f2f2f2;
                font-weight: bold;
            }

            .attendance-table .final-result-buttons {
                display: inline-block;
            }

            .attendance-table .final-result-button {
                width: auto;
                padding: 5px 10px;
            }

        .attend_participant_list {
            display: none;
        }
    }

    @media (max-width: 767px) {
        .attendance-table {
            display: none;
        }

        .trn_card {
            width: 100%
        }

        .attend_attendance_table {
            display: none;
        }

        .attend_participant_list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .attend_participant_item {
            background-color: white;
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }

        .attend_participant_details {
            display: none;
            margin-top: 10px;
        }

        .attend_participant_item.attend_active .attend_participant_details {
            display: block;
        }

        .attend_participant_details label {
            display: block;
            margin-bottom: 5px;
        }

    }
</style>
<div style="height:100%;">
    <div class="box library maincontainer" style="height:100%;overflow-y:hidden;max-width:1200px;margin:0 auto 0 auto">
        <div class="rowx header" ng-include="'app/views/header.html'"></div>
        <div style="position:relative;">
            <div ng-include="'app/views/menu.html'"></div>
        </div>

        <div class="rowx content" style="clear:both;background:#f0f3f5; ">
            <div id="popup_exam" dx-popup="popup_exam" class="no-padding">
                <div id="scroll_checklist" dx-scroll-view="scroll_checklist" style="padding: 5px">
                    <div class="section">
                        <h5><i class="fas fa-info-circle" style="font-size: 23px"></i> Exam Details</h5>
                        <div class="container">
                            <div class="trn_card">
                                <h3><i class="fas fa-book"></i> Course Title</h3>
                                <p>HF</p>
                            </div>
                            <div class="trn_card">
                                <h3><i class="fas fa-id-badge"></i> Class ID</h3>
                                <p>CLS-33884</p>
                            </div>
                            <div class="trn_card">
                                <h3><i class="fas fa-calendar-alt"></i> Exam Date</h3>
                                <p>19.10.2023</p>
                            </div>
                            <div class="trn_card">
                                <h3><i class="fas fa-clock"></i> Course Duration</h3>
                                <p>8 hrs</p>
                            </div>
                        </div>
                    </div>

                    <!-- Attendance Section -->
                    <div class="attendance-section">
                        <h5><i class="fas fa-users" style="font-size: 23px"></i> Exam Results</h5>

                        <!-- trn_card layout for mobile devices -->
                        <div class="attendance-container" ng-if="!isLargeScreen()">
                            <div class="attendance_trn_card" ng-repeat="trainee in trainees">
                                <h3 ng-click="toggletrn_cardDetails(trainee.id)">{{trainee.name}}</h3>
                                <div class="trn_card-details" ng-show="trainee.showDetails">
                                    <p><strong>Presence:</strong> {{trainee.presence}}%</p>
                                    <p><strong>Score:</strong> {{trainee.score}}</p>
                                    <p><strong>Final Result:</strong></p>
                                    <div class="final-result-buttons">
                                        <button class="final-result-button pass" ng-class="{'active': trainee.finalResult === 'Pass'}" ng-click="updateFinalResult(trainee.id, 'Pass')">Pass</button>
                                        <button class="final-result-button failed" ng-class="{'active': trainee.finalResult === 'Failed'}" ng-click="updateFinalResult(trainee.id, 'Failed')">Failed</button>
                                        <button class="final-result-button reexam" ng-class="{'active': trainee.finalResult === 'Re-exam'}" ng-click="updateFinalResult(trainee.id, 'Re-exam')">Re-exam</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Table layout for larger screens -->
                        <table class="attendance-table" ng-if="isLargeScreen()">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Presence</th>
                                    <th>Score</th>
                                    <th>Final Result</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="trainee in trainees">
                                    <td>{{trainee.name}}</td>
                                    <td>{{trainee.presence}}%</td>
                                    <td>{{trainee.score}}</td>
                                    <td>
                                        <div class="final-result-buttons">
                                            <button class="final-result-button pass" ng-class="{'active': trainee.finalResult === 'Pass'}" ng-click="updateFinalResult(trainee.id, 'Pass')">Pass</button>
                                            <button class="final-result-button failed" ng-class="{'active': trainee.finalResult === 'Failed'}" ng-click="updateFinalResult(trainee.id, 'Failed')">Failed</button>
                                            <button class="final-result-button reexam" ng-class="{'active': trainee.finalResult === 'Re-exam'}" ng-click="updateFinalResult(trainee.id, 'Re-exam')">Re-exam</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="popup_attendance" dx-popup="popup_attendance" class="no-padding">
                <div id="scroll_checklist" dx-scroll-view="scroll_checklist" style="padding: 5px">
                    <!-- Attendance Sections -->
                    <div class="attend_section" ng-repeat="section in sections">
                        <h5><i class="fas fa-users" style="font-size: 23px"></i> Attendance for {{section.date}}, {{section.time}}</h5>

                        <!-- Desktop Table -->
                        <table class="attend_attendance_table">
                            <thead>
                                <tr>
                                    <th>National Code</th>
                                    <th>Name</th>
                                    <th>Department</th>
                                    <th>Presence</th>
                                    <th>Remark</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="trainee in section.trainees">
                                    <td>{{trainee.nationalCode}}</td>
                                    <td>{{trainee.name}}</td>
                                    <td>{{trainee.department}}</td>
                                    <td><input type="checkbox" ng-model="trainee.presence"></td>
                                    <td>{{trainee.remark}}</td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Mobile List -->
                        <div class="attendance-container" ng-if="!isLargeScreen()">
                            <div class="attendance_trn_card" ng-repeat="trainee in section.trainees">
                                <h3 ng-click="toggle_attendance_details(trainee.id)">{{trainee.name}}</h3>
                                <div class="trn_card-details" ng-show="trainee.showDetails">
                                    <p><strong>National Code:</strong> {{trainee.nationalCode}}</p>
                                    <p><strong>Department:</strong> {{trainee.department}}</p>
                                    <p><strong>Presence:</strong> <input type="checkbox" ng-model="trainee.presence"></p>
                                    <p><strong>Remark:</strong> {{trainee.remark}}</p>
                                </div>
                            </div>
                        </div>


                        <!--<ul class="attend_participant_list">
        <li class="attend_participant_item" ng-repeat="participant in section.participants" ng-click="participant.active = !participant.active" ng-class="{'attend_active': participant.active}">
            <span>{{participant.name}}</span>
            <div class="attend_participant_details">
                <label>National Code: {{participant.nationalCode}}</label>
                <label>Department: {{participant.department}}</label>
                <label>Presence: <input type="checkbox" ng-model="participant.presence"></label>
                <label>Remark: {{participant.remark}}</label>
            </div>
        </li>
    </ul>-->
                    </div>
                </div>
            </div>
        </div>

        <div class="rowx footer app-footer" ng-include="'app/views/footer.html?v=2036'" ng-init="type = 'trn-instructor-course';" style="padding:0;flex:0 0 45px"></div>
    </div>



    <div dx-load-panel="loadPanel"></div>
</div>
